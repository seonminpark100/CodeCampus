package com.lms.springboot.prof.attendance;


import java.util.ArrayList;

import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.lms.springboot.prof.ProfDTO;
import com.lms.springboot.utils.PagingUtil;

import jakarta.servlet.http.HttpServletRequest;

@Mapper
public interface IProfAttendanceService
{

//	출석
	@RequestMapping("/prof/absentboard.do")
	public String absentBoardList(@RequestParam("lectureCode") String lecture_code, Model model, HttpServletRequest req, ProfDTO profDTO) {
		profDTO.setLecture_code(lecture_code);
		
		int totalCount = dao.getStudentTotalCount(profDTO);
		int pageSize = 50; 
		int blockPage = 5; 
		int pageNum = (req.getParameter("pageNum")==null 
			|| req.getParameter("pageNum").equals("")) 
			? 1 : Integer.parseInt(req.getParameter("pageNum"));
		
		PagingUtil.paging(req, profDTO, model, totalCount, pageSize, blockPage, pageNum);
		
		ArrayList<ProfDTO> lists = dao.studentBoardListPage(profDTO);
		model.addAttribute("lists", lists);
		
		String pagingImg =
			PagingUtil.pagingImg(totalCount, pageSize, 
				blockPage, pageNum,
				req.getContextPath()+"/prof/absentboard.do?lectureCode="+lecture_code+"&");
		model.addAttribute("pagingImg", pagingImg);
		model.addAttribute("lectureCode", lecture_code);
		
		return "prof/absentBoard/absentBoardList";
	}
//	출석부
	public int absentProcProf
	(@Param("_user_id") String user_id, @Param("_absent_state") String absent_state, 
			@Param("_lectureCode") String lecture_code);
}
